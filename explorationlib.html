
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Introduction to explorationlib - Lab &#8212; Explorations!?</title>
    
  <link rel="stylesheet" href="_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/sphinx-book-theme.40e2e510f6b7d1648584402491bb10fe.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.d31b09fe5c1d09cb49b26a786de4a05d.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="The Runaround - Lab" href="therunaround.html" />
    <link rel="prev" title="Introduction to python - Lab" href="python.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="index.html">
  
  <img src="_static/logo.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Explorations!?</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="introduction.html">
   Introduction
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Assignments
 </span>
</p>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="python.html">
   Introduction to python - Lab
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Introduction to
   <em>
    explorationlib
   </em>
   - Lab
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="therunaround.html">
   The Runaround - Lab
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="sniff%21.html">
   The Sniff! - Lab
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="air-quotes.html">
   The Air Quotes Cognition - Lab
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="dont-eat-me.html">
   The Please Don’t Eat Me - Lab
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="be-best.html">
   The Be Best - Lab
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="oh-no.html">
   The Oh No! - Lab
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="follow-my-directed.html">
   The Follow the Directed - Lab
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="oh-info.html">
   The Oh My Info - Lab
  </a>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/explorationlib.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/parenthetical-e/explorations-book/main?urlpath=tree/book/explorationlib.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <a class="colab-button" href="https://colab.research.google.com/github/parenthetical-e/explorations-book/blob/main/book/explorationlib.ipynb"><button type="button" class="btn btn-secondary topbarbtn"
                title="Launch Colab" data-toggle="tooltip" data-placement="left"><img class="colab-button-logo"
                    src="_static/images/logo_colab.png"
                    alt="Interact on Colab">Colab</button></a>
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#assignment-1">
   Assignment 1
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#install-explorationlib">
     Install
     <em>
      explorationlib
     </em>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#import-some-modules">
     Import some modules
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#configure-plots">
     Configure plots
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#better-autocomplete-and-development">
     Better autocomplete and development
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#create-data">
     Create “data/”
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#run-a-simple-experiment-using-explorationlib">
     Run a simple experiment using
     <em>
      explorationlib
     </em>
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#instantiate">
       Instantiate
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#run">
       Run
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#plot">
       Plot
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#score">
       Score
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#assignment-2">
   Assignment 2
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#science">
     Science!
    </a>
   </li>
  </ul>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="introduction-to-explorationlib-lab">
<h1>Introduction to <em>explorationlib</em> - Lab<a class="headerlink" href="#introduction-to-explorationlib-lab" title="Permalink to this headline">¶</a></h1>
<p>This section has two goals. First to get you familiar with the python library used throughout to simulate and explore exploration. Second, is to get familiar with running that code online using Google’s colaboratory.</p>
<p>Google colab is a simple free way to run python code. See the <em>python</em> chapter for more on it. Most of the chapters and assignments in this book have a button to open in colab. This notebook is a simple compact test for all the others. A quick way to make sure the rest should work.</p>
<p>This section has two assignments.</p>
<div class="section" id="assignment-1">
<h2>Assignment 1<a class="headerlink" href="#assignment-1" title="Permalink to this headline">¶</a></h2>
<p>Use the button to open this assignment in a colab. Once it is open, if it is open, run all the cells. Read each cell, then run it, that is. This simple test of the colab is also a good but basic introduction to <em>explorationlib</em>, which is the basis for all the experiments and assignments you will see.</p>
<p>If there are no errors, celebrate and consider <em>this</em> assignment complete.</p>
<p><em>Note:</em> I assume that you, reader, are familiar with python programming already. If you are not, see the <em>Introduction to python</em> assignment.</p>
<div class="section" id="install-explorationlib">
<h3>Install <em>explorationlib</em><a class="headerlink" href="#install-explorationlib" title="Permalink to this headline">¶</a></h3>
<p>Colab’s come with many of the libraries we will need. It does not come with <em>explorationlib</em>. It’s a module we will be using, and was written to support this book. Let’s Install it.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>pip install --upgrade git+https://github.com/parenthetical-e/explorationlib
<span class="o">!</span>pip install celluloid # <span class="k">for</span> the gifs
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="import-some-modules">
<h3>Import some modules<a class="headerlink" href="#import-some-modules" title="Permalink to this headline">¶</a></h3>
<p>From the standard library</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">sys</span>
</pre></div>
</div>
</div>
</div>
<p>that are common to scientific programming in python</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</pre></div>
</div>
</div>
</div>
<p>Import a bunch of functions from <em>explorationlib</em>. If our install using <em>pip</em> above worked out, this next cell should run without error.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># All the explorers we will play with are called</span>
<span class="c1"># &quot;agents&quot;; a bit of computer science jargon</span>
<span class="kn">from</span> <span class="nn">explorationlib</span> <span class="kn">import</span> <span class="n">agent</span>

<span class="c1"># The environments we will simulate live in a &quot;gym&quot;</span>
<span class="kn">from</span> <span class="nn">explorationlib</span> <span class="kn">import</span> <span class="n">local_gym</span> <span class="k">as</span> <span class="n">gym</span>

<span class="c1"># Computational experiments are run with &#39;experiment&#39;</span>
<span class="kn">from</span> <span class="nn">explorationlib.run</span> <span class="kn">import</span> <span class="n">experiment</span>

<span class="c1"># Here are some tools to select, save, and load</span>
<span class="c1"># data from computational experiments</span>
<span class="kn">from</span> <span class="nn">explorationlib.util</span> <span class="kn">import</span> <span class="n">select_exp</span>
<span class="kn">from</span> <span class="nn">explorationlib.util</span> <span class="kn">import</span> <span class="n">load</span>
<span class="kn">from</span> <span class="nn">explorationlib.util</span> <span class="kn">import</span> <span class="n">save</span>

<span class="c1"># A bunch of tools for plotting and for</span>
<span class="c1"># movie making</span>
<span class="kn">from</span> <span class="nn">explorationlib.plot</span> <span class="kn">import</span> <span class="n">plot_position2d</span>
<span class="kn">from</span> <span class="nn">explorationlib.plot</span> <span class="kn">import</span> <span class="n">plot_length_hist</span>
<span class="kn">from</span> <span class="nn">explorationlib.plot</span> <span class="kn">import</span> <span class="n">plot_length</span>
<span class="kn">from</span> <span class="nn">explorationlib.plot</span> <span class="kn">import</span> <span class="n">plot_targets2d</span>
<span class="kn">from</span> <span class="nn">explorationlib.plot</span> <span class="kn">import</span> <span class="n">render_2d</span>
<span class="kn">from</span> <span class="nn">explorationlib.plot</span> <span class="kn">import</span> <span class="n">show_gif</span>

<span class="c1"># A couple metrics for scoring how well, or poorly,</span>
<span class="c1"># an exploration experiment went.</span>
<span class="kn">from</span> <span class="nn">explorationlib.score</span> <span class="kn">import</span> <span class="n">search_efficiency</span>
<span class="kn">from</span> <span class="nn">explorationlib.score</span> <span class="kn">import</span> <span class="n">average_reward</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="configure-plots">
<h3>Configure plots<a class="headerlink" href="#configure-plots" title="Permalink to this headline">¶</a></h3>
<p>to be be nicer looking. We don’t <em>have</em> to do this, but <em>why not</em>?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> inline
<span class="o">%</span><span class="k">config</span> InlineBackend.figure_format=&#39;retina&#39;

<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s2">&quot;axes.facecolor&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s2">&quot;figure.facecolor&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s2">&quot;font.size&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;16&quot;</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="better-autocomplete-and-development">
<h3>Better autocomplete and development<a class="headerlink" href="#better-autocomplete-and-development" title="Permalink to this headline">¶</a></h3>
<p>In our notebooks. Again, optional. If this errors out, and it might, skip it.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">config</span> IPCompleter.greedy=True
<span class="o">%</span><span class="k">load_ext</span> autoreload
<span class="o">%</span><span class="k">autoreload</span> 2
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="create-data">
<h3>Create “data/”<a class="headerlink" href="#create-data" title="Permalink to this headline">¶</a></h3>
<p>Make a folder to keep experimental data in. We will use it for all our examples.</p>
<p><strong>WARNING</strong> When running in a colab, anything you save to “data/” will be lost as soon as you shutdown the colab. This is ok for now. We will cover ways to save your data permanently later on.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="run-a-simple-experiment-using-explorationlib">
<h3>Run a simple experiment using <em>explorationlib</em><a class="headerlink" href="#run-a-simple-experiment-using-explorationlib" title="Permalink to this headline">¶</a></h3>
<ol class="simple">
<li><p>Instantiate a random walker, in a small 2d box environment, with walls and a lot of targets to find when exploring. Each target should have a value of ‘1’.</p></li>
<li><p>Run an experiment, for 200 steps.</p></li>
<li><p>Plot the env, target, the agents path in the experiment.</p></li>
<li><p>Make a movie of experiment.</p></li>
<li><p>Score the agent, and reward (targets), and its efficiency.</p></li>
</ol>
<div class="section" id="instantiate">
<h4>Instantiate<a class="headerlink" href="#instantiate" title="Permalink to this headline">¶</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Parameters</span>
<span class="n">exp_name</span> <span class="o">=</span> <span class="s2">&quot;data/explorationlib_a1.pkl&quot;</span>   <span class="c1"># all experiments need names</span>
<span class="n">num_experiments</span> <span class="o">=</span> <span class="mi">1</span>             <span class="c1"># we only want to run one experiment </span>
<span class="n">num_steps</span> <span class="o">=</span> <span class="mi">200</span>                 <span class="c1"># how many exploration steps in space?</span>

<span class="n">scale</span> <span class="o">=</span> <span class="mi">2</span>             <span class="c1"># The noise scale; the diffusion constant</span>
<span class="n">detection_radius</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># How far can the agent see?</span>
<span class="n">boundary</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>   <span class="c1"># a 2d world, 10 by 10</span>
<span class="n">mode</span> <span class="o">=</span> <span class="s2">&quot;stopping&quot;</span>     <span class="c1"># stop when we hit a wall</span>
<span class="n">num_targets</span> <span class="o">=</span> <span class="mi">100</span>     <span class="c1"># how many thingss to &quot;eat&quot;?</span>

<span class="c1"># Setup targets. Targets are an abstraction for the</span>
<span class="c1"># thing we are exploring to find. For now, all targets</span>
<span class="c1"># are just the number 1 placed randomly about.</span>
<span class="n">targets</span> <span class="o">=</span> <span class="n">gym</span><span class="o">.</span><span class="n">uniform_targets</span><span class="p">(</span><span class="n">num_targets</span><span class="p">,</span> <span class="n">boundary</span><span class="p">)</span>
<span class="n">values</span> <span class="o">=</span> <span class="n">gym</span><span class="o">.</span><span class="n">constant_values</span><span class="p">(</span><span class="n">targets</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="c1"># Setup agent and env</span>
<span class="n">env</span> <span class="o">=</span> <span class="n">gym</span><span class="o">.</span><span class="n">Bounded</span><span class="p">(</span><span class="n">boundary</span><span class="o">=</span><span class="n">boundary</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">)</span>
<span class="n">env</span><span class="o">.</span><span class="n">add_targets</span><span class="p">(</span><span class="n">targets</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
<span class="n">brownian</span> <span class="o">=</span> <span class="n">agent</span><span class="o">.</span><span class="n">Diffusion2d</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="run">
<h4>Run<a class="headerlink" href="#run" title="Permalink to this headline">¶</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Cleanup old versions</span>
<span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{exp_name}</span><span class="s2">&quot;</span><span class="p">):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run!</span>
<span class="n">experiment</span><span class="p">(</span><span class="n">exp_name</span><span class="p">,</span> <span class="n">brownian</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">num_steps</span><span class="o">=</span><span class="n">num_steps</span><span class="p">,</span> <span class="n">num_experiments</span><span class="o">=</span><span class="n">num_experiments</span><span class="p">)</span>
<span class="n">exp_data</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="n">exp_name</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="plot">
<h4>Plot<a class="headerlink" href="#plot" title="Permalink to this headline">¶</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot the 2d env, and the targets (black dots)</span>
<span class="n">plot_targets2d</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">boundary</span><span class="o">=</span><span class="n">boundary</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Simple box&quot;</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot the positions the agent took during its</span>
<span class="c1"># random walk, and the targets (this time in red)</span>
<span class="c1">#</span>
<span class="c1"># Note: there are quite a few parameters you can play</span>
<span class="c1"># with to change the size of the plot, colors, and so on.</span>
<span class="c1"># See `explorationlib.plot` for all the options</span>

<span class="c1"># Agent</span>
<span class="n">ax</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plot_position2d</span><span class="p">(</span>
    <span class="n">exp_data</span><span class="p">,</span>
    <span class="n">boundary</span><span class="o">=</span><span class="n">boundary</span><span class="p">,</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Brownian&quot;</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
    <span class="n">alpha</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
<span class="p">)</span>
<span class="c1"># Targets</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plot_targets2d</span><span class="p">(</span>
    <span class="n">env</span><span class="p">,</span>
    <span class="n">boundary</span><span class="o">=</span><span class="n">boundary</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span>
    <span class="n">alpha</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Targets&quot;</span><span class="p">,</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="score">
<h4>Score<a class="headerlink" href="#score" title="Permalink to this headline">¶</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">average_reward</span><span class="p">(</span><span class="n">exp_data</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">search_efficiency</span><span class="p">(</span><span class="n">exp_data</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><em>Direction</em>: Go back to the top of this section, and run it again. Each time you do you should generate a new exploration. You’ll get different rewards and efficiency each time as well.</p>
<p><em>Question</em>: How much variation do you see from run to run? More to the point, if this was how you <em>had</em> to explore the world, how well do you think you’d do?</p>
</div>
</div>
</div>
<div class="section" id="assignment-2">
<h2>Assignment 2<a class="headerlink" href="#assignment-2" title="Permalink to this headline">¶</a></h2>
<div class="section" id="science">
<h3>Science!<a class="headerlink" href="#science" title="Permalink to this headline">¶</a></h3>
<p>Let’s run our first real experiment. Let’s assume that the walker from Assignment 1 has the optimal scale of noise to search its 10 by 10 box, with walls. (This is not tru but put that aside). Now, what if the “world” (its box) suddenly got ten times bigger, but the number of targets stayed the same….</p>
<p>The goal of this experiment is to find out, with your acting as an oracle. Can you help the walker discover a new noise scale that improves, or returns, the search efficient to its previous value?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># First rerun the experiment with many more repeats, </span>
<span class="c1"># so we get a stable estimate of the baseline value</span>

<span class="c1"># Parameters</span>
<span class="n">exp_name</span> <span class="o">=</span> <span class="s2">&quot;data/explorationlib_a2_10.pkl&quot;</span>  
<span class="n">scale</span><span class="o">=</span><span class="mi">2</span>                           <span class="c1"># The noise scale; the diffusion constant</span>
<span class="n">num_experiments</span> <span class="o">=</span> <span class="mi">200</span>             <span class="c1"># 200 repeats!</span>
<span class="n">num_steps</span> <span class="o">=</span> <span class="mi">200</span>                   <span class="c1"># how many exploration steps in space?</span>

<span class="n">detection_radius</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># How far can the agent see?</span>
<span class="n">boundary</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>   <span class="c1"># a 2d world, 10 by 10</span>
<span class="n">mode</span> <span class="o">=</span> <span class="s2">&quot;stopping&quot;</span>     <span class="c1"># stop when we hit a wall</span>
<span class="n">num_targets</span> <span class="o">=</span> <span class="mi">100</span>     <span class="c1"># how many thingss to &quot;eat&quot;?</span>

<span class="c1"># Setup targets. Targets are an abstraction for the</span>
<span class="c1"># thing we are exploring to find. For now, all targets</span>
<span class="c1"># are just the number 1 placed randomly about.</span>
<span class="n">targets</span> <span class="o">=</span> <span class="n">gym</span><span class="o">.</span><span class="n">uniform_targets</span><span class="p">(</span><span class="n">num_targets</span><span class="p">,</span> <span class="n">boundary</span><span class="p">)</span>
<span class="n">values</span> <span class="o">=</span> <span class="n">gym</span><span class="o">.</span><span class="n">constant_values</span><span class="p">(</span><span class="n">targets</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="c1"># Setup agent and env</span>
<span class="n">env</span> <span class="o">=</span> <span class="n">gym</span><span class="o">.</span><span class="n">Bounded</span><span class="p">(</span><span class="n">boundary</span><span class="o">=</span><span class="n">boundary</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">)</span>
<span class="n">env</span><span class="o">.</span><span class="n">add_targets</span><span class="p">(</span><span class="n">targets</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
<span class="n">brownian</span> <span class="o">=</span> <span class="n">agent</span><span class="o">.</span><span class="n">Diffusion2d</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">)</span>

<span class="c1"># Cleanup old versions</span>
<span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{exp_name}</span><span class="s2">&quot;</span><span class="p">):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

<span class="c1"># Run!</span>
<span class="n">experiment</span><span class="p">(</span><span class="n">exp_name</span><span class="p">,</span> <span class="n">brownian</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">num_steps</span><span class="o">=</span><span class="n">num_steps</span><span class="p">,</span> <span class="n">num_experiments</span><span class="o">=</span><span class="n">num_experiments</span><span class="p">)</span>
<span class="n">exp_data</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="n">exp_name</span><span class="p">)</span>

<span class="c1"># Score</span>
<span class="n">scores</span> <span class="o">=</span> <span class="n">search_efficiency</span><span class="p">(</span><span class="n">exp_data</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&gt;&gt;&gt; Mean {np.mean(scores)}, SD: {np.std(scores)}&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Now increase the <code class="docutils literal notranslate"><span class="pre">boundary</span></code> to be a (100, 100) box, and rerun the experiment above. <em>Note</em>: You can just copy the code, BUT make sure to choose a new <code class="docutils literal notranslate"><span class="pre">exp_name</span></code> as well.</p>
<p><em>Question</em>: Is a scale of 2 still optimal?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Put your code here.</span>
</pre></div>
</div>
</div>
</div>
<p>Once you rerun with the big boundary, you will have an estimate for how the search efficiency has dropped. Now, rerun the experiment but this time experiment with different values of <code class="docutils literal notranslate"><span class="pre">scale</span></code>.</p>
<p><em>Question</em>: how much can you improve the mean score?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Put your code here.</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="python.html" title="previous page">Introduction to python - Lab</a>
    <a class='right-next' id="next-link" href="therunaround.html" title="next page">The Runaround - Lab</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Erik J Peterson<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="_static/js/index.3da636dd464baa7582d2.js"></script>


    
  </body>
</html>